—
SC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Services\OrderService.cs
	namespace 	
OrderService
 
. 
Services 
{ 
public		 

class		 
OrderService		 
:		 
IOrderService		  -
{

 
private 
readonly 
IOrderRepository )
_orderRepository* :
;: ;
public 
OrderService 
( 
IOrderRepository ,
orderRepository- <
)< =
{ 	
_orderRepository 
= 
orderRepository .
;. /
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Order& +
>+ ,
>, -
GetAllOrdersAsync. ?
(? @
)@ A
{ 	
return 
await 
_orderRepository )
.) *
GetAllOrdersAsync* ;
(; <
)< =
;= >
} 	
public 
async 
Task 
< 
Order 
>  
GetOrderByIdAsync! 2
(2 3
Guid3 7
orderId8 ?
)? @
{ 	
return 
await 
_orderRepository )
.) *
GetOrderByIdAsync* ;
(; <
orderId< C
)C D
;D E
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Order& +
>+ ,
>, -"
GetOrdersByUserIdAsync. D
(D E
GuidE I
userIdJ P
)P Q
{ 	
return 
await 
_orderRepository )
.) *"
GetOrdersByUserIdAsync* @
(@ A
userIdA G
)G H
;H I
} 	
public!! 
async!! 
Task!! 
<!! 
Order!! 
>!!  
CreateOrderAsync!!! 1
(!!1 2
Order!!2 7
order!!8 =
)!!= >
{"" 	
order## 
.## 
	OrderDate## 
=## 
DateTime## &
.##& '
UtcNow##' -
;##- .
order$$ 
.$$ 
Status$$ 
=$$ 
$str$$ $
;$$$ %
return%% 
await%% 
_orderRepository%% )
.%%) *
CreateOrderAsync%%* :
(%%: ;
order%%; @
)%%@ A
;%%A B
}&& 	
public(( 
async(( 
Task(( 
<(( 
bool(( 
>(( "
UpdateOrderStatusAsync((  6
(((6 7
Guid((7 ;
orderId((< C
,((C D
string((E K
	newStatus((L U
)((U V
{)) 	
return** 
await** 
_orderRepository** )
.**) *"
UpdateOrderStatusAsync*** @
(**@ A
orderId**A H
,**H I
	newStatus**J S
)**S T
;**T U
}++ 	
public-- 
async-- 
Task-- 
<-- 
bool-- 
>-- 
DeleteOrderAsync--  0
(--0 1
Guid--1 5
orderId--6 =
)--= >
{.. 	
return// 
await// 
_orderRepository// )
.//) *
DeleteOrderAsync//* :
(//: ;
orderId//; B
)//B C
;//C D
}00 	
}11 
}22 ñ
TC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Services\IOrderService.cs
	namespace 	
OrderService
 
. 
Services 
{ 
public 

	interface 
IOrderService "
{ 
Task		 
<		 
IEnumerable		 
<		 
Order		 
>		 
>		  
GetAllOrdersAsync		! 2
(		2 3
)		3 4
;		4 5
Task

 
<

 
Order

 
>

 
GetOrderByIdAsync

 %
(

% &
Guid

& *
orderId

+ 2
)

2 3
;

3 4
Task 
< 
IEnumerable 
< 
Order 
> 
>  "
GetOrdersByUserIdAsync! 7
(7 8
Guid8 <
userId= C
)C D
;D E
Task 
< 
Order 
> 
CreateOrderAsync $
($ %
Order% *
order+ 0
)0 1
;1 2
Task 
< 
bool 
> "
UpdateOrderStatusAsync )
() *
Guid* .
orderId/ 6
,6 7
string8 >
	newStatus? H
)H I
;I J
Task 
< 
bool 
> 
DeleteOrderAsync #
(# $
Guid$ (
orderId) 0
)0 1
;1 2
} 
} ‰&
ZC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Repositories\OrderRepository.cs
	namespace 	
OrderService
 
. 
Repositories #
{		 
public

 

class

 
OrderRepository

  
:

! "
IOrderRepository

# 3
{ 
private 
readonly 
OrderDbContext '
_context( 0
;0 1
public 
OrderRepository 
( 
OrderDbContext -
context. 5
)5 6
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Order& +
>+ ,
>, -
GetAllOrdersAsync. ?
(? @
)@ A
{ 	
return 
await 
_context !
.! "
Orders" (
.( )
ToListAsync) 4
(4 5
)5 6
;6 7
} 	
public 
async 
Task 
< 
Order 
>  
GetOrderByIdAsync! 2
(2 3
Guid3 7
orderId8 ?
)? @
{ 	
return 
await 
_context !
.! "
Orders" (
.( )
	FindAsync) 2
(2 3
orderId3 :
): ;
;; <
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Order& +
>+ ,
>, -"
GetOrdersByUserIdAsync. D
(D E
GuidE I
userIdJ P
)P Q
{ 	
return 
await 
_context !
.! "
Orders" (
.  ! "
Where  " '
(  ' (
o  ( )
=>  * ,
o  - .
.  . /
UserId  / 5
==  6 8
userId  9 ?
)  ? @
.!!! "
ToListAsync!!" -
(!!- .
)!!. /
;!!/ 0
}"" 	
public$$ 
async$$ 
Task$$ 
<$$ 
Order$$ 
>$$  
CreateOrderAsync$$! 1
($$1 2
Order$$2 7
order$$8 =
)$$= >
{%% 	
_context&& 
.&& 
Orders&& 
.&& 
Add&& 
(&&  
order&&  %
)&&% &
;&&& '
await'' 
_context'' 
.'' 
SaveChangesAsync'' +
(''+ ,
)'', -
;''- .
return(( 
order(( 
;(( 
})) 	
public++ 
async++ 
Task++ 
<++ 
bool++ 
>++ "
UpdateOrderStatusAsync++  6
(++6 7
Guid++7 ;
orderId++< C
,++C D
string++E K
	newStatus++L U
)++U V
{,, 	
var-- 
order-- 
=-- 
await-- 
_context-- &
.--& '
Orders--' -
.--- .
	FindAsync--. 7
(--7 8
orderId--8 ?
)--? @
;--@ A
if.. 
(.. 
order.. 
==.. 
null.. 
).. 
return.. %
false..& +
;..+ ,
order00 
.00 
Status00 
=00 
	newStatus00 $
;00$ %
_context11 
.11 
Orders11 
.11 
Update11 "
(11" #
order11# (
)11( )
;11) *
await22 
_context22 
.22 
SaveChangesAsync22 +
(22+ ,
)22, -
;22- .
return33 
true33 
;33 
}44 	
public66 
async66 
Task66 
<66 
bool66 
>66 
DeleteOrderAsync66  0
(660 1
Guid661 5
orderId666 =
)66= >
{77 	
var88 
order88 
=88 
await88 
_context88 &
.88& '
Orders88' -
.88- .
	FindAsync88. 7
(887 8
orderId888 ?
)88? @
;88@ A
if99 
(99 
order99 
==99 
null99 
)99 
return99 %
false99& +
;99+ ,
_context;; 
.;; 
Orders;; 
.;; 
Remove;; "
(;;" #
order;;# (
);;( )
;;;) *
await<< 
_context<< 
.<< 
SaveChangesAsync<< +
(<<+ ,
)<<, -
;<<- .
return== 
true== 
;== 
}>> 	
}?? 
}@@ ÿ
[C:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Repositories\IOrderRepository.cs
	namespace 	
OrderService
 
. 
Repositories #
{ 
public 

	interface 
IOrderRepository %
{		 
Task

 
<

 
IEnumerable

 
<

 
Order

 
>

 
>

  
GetAllOrdersAsync

! 2
(

2 3
)

3 4
;

4 5
Task 
< 
Order 
> 
GetOrderByIdAsync %
(% &
Guid& *
orderId+ 2
)2 3
;3 4
Task 
< 
IEnumerable 
< 
Order 
> 
>  "
GetOrdersByUserIdAsync! 7
(7 8
Guid8 <
userId= C
)C D
;D E
Task 
< 
Order 
> 
CreateOrderAsync $
($ %
Order% *
order+ 0
)0 1
;1 2
Task 
< 
bool 
> "
UpdateOrderStatusAsync )
() *
Guid* .
orderId/ 6
,6 7
string8 >
	newStatus? H
)H I
;I J
Task 
< 
bool 
> 
DeleteOrderAsync #
(# $
Guid$ (
orderId) 0
)0 1
;1 2
} 
} ¯A
EC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
WebHost 
. 
ConfigureKestrel  
(  !
options! (
=>) +
{ 
options 
. 
ListenAnyIP 
( 
$num 
) 
; 
} 
) 
; 
builder 
. 
Services 
. 
	Configure 
< 
JwtSettings &
>& '
(' (
builder( /
./ 0
Configuration0 =
.= >

GetSection> H
(H I
$strI V
)V W
)W X
;X Y
builder 
. 
Services 
. 
AddDbContext 
< 
OrderDbContext ,
>, -
(- .
options. 5
=>6 8
options 
. 
UseSqlServer 
( 
builder  
.  !
Configuration! .
.. /
GetConnectionString/ B
(B C
$strC V
)V W
,W X

sqlOptions 
=> 

sqlOptions  
.  ! 
EnableRetryOnFailure! 5
(5 6
)6 7
) 
) 
; 
builder 
. 
Services 
. 
	AddScoped 
< 
IOrderRepository +
,+ ,
OrderRepository- <
>< =
(= >
)> ?
;? @
builder 
. 
Services 
. 
	AddScoped 
< 
IOrderService (
,( )
OrderService* 6
.6 7
Services7 ?
.? @
OrderService@ L
>L M
(M N
)N O
;O P
builder!! 
.!! 
Services!! 
.!! 
AddControllers!! 
(!!  
)!!  !
;!!! "
builder"" 
."" 
Services"" 
."" #
AddEndpointsApiExplorer"" (
(""( )
)"") *
;""* +
builder%% 
.%% 
Services%% 
.%% 
AddSwaggerGen%% 
(%% 
c%%  
=>%%! #
{&& 
c'' 
.'' 

SwaggerDoc'' 
('' 
$str'' 
,'' 
new'' 
('' 
)'' 
{'' 
Title'' $
=''% &
$str''' 9
,''9 :
Version''; B
=''C D
$str''E I
}''J K
)''K L
;''L M
var)) 
securityScheme)) 
=)) 
new)) !
OpenApiSecurityScheme)) 2
{** 
Name++ 
=++ 
$str++ 
,++ 
Type,, 
=,, 
SecuritySchemeType,, !
.,,! "
Http,," &
,,,& '
Scheme-- 
=-- 
$str-- 
,-- 
BearerFormat.. 
=.. 
$str.. 
,.. 
In// 

=// 
ParameterLocation// 
.// 
Header// %
,//% &
Description00 
=00 
$str00 M
,00M N
	Reference11 
=11 
new11 
OpenApiReference11 (
{22 	
Type33 
=33 
ReferenceType33  
.33  !
SecurityScheme33! /
,33/ 0
Id44 
=44 
$str44 
}55 	
}66 
;66 
c88 
.88 !
AddSecurityDefinition88 
(88 
$str88 $
,88$ %
securityScheme88& 4
)884 5
;885 6
c99 
.99 "
AddSecurityRequirement99 
(99 
new99  &
OpenApiSecurityRequirement99! ;
{:: 
{;; 	
securityScheme;;
 
,;; 
new;; 
[;; 
];; 
{;;  !
$str;;" *
};;+ ,
};;- .
}<< 
)<< 
;<< 
}== 
)== 
;== 
builder@@ 
.@@ 
Services@@ 
.@@ 
AddAuthentication@@ "
(@@" #
options@@# *
=>@@+ -
{AA 
optionsBB 
.BB %
DefaultAuthenticateSchemeBB %
=BB& '
JwtBearerDefaultsBB( 9
.BB9 : 
AuthenticationSchemeBB: N
;BBN O
optionsCC 
.CC "
DefaultChallengeSchemeCC "
=CC# $
JwtBearerDefaultsCC% 6
.CC6 7 
AuthenticationSchemeCC7 K
;CCK L
}DD 
)DD 
.EE 
AddJwtBearerEE 
(EE 
optionsEE 
=>EE 
{FF 
varGG 
jwtSettingsGG 
=GG 
builderGG 
.GG 
ConfigurationGG +
.GG+ ,

GetSectionGG, 6
(GG6 7
$strGG7 D
)GGD E
.GGE F
GetGGF I
<GGI J
JwtSettingsGGJ U
>GGU V
(GGV W
)GGW X
;GGX Y
optionsHH 
.HH %
TokenValidationParametersHH %
=HH& '
newHH( +%
TokenValidationParametersHH, E
{II 
ValidateIssuerJJ 
=JJ 
trueJJ 
,JJ 
ValidateAudienceKK 
=KK 
trueKK 
,KK  
ValidateLifetimeLL 
=LL 
trueLL 
,LL  $
ValidateIssuerSigningKeyMM  
=MM! "
trueMM# '
,MM' (
ValidIssuerNN 
=NN 
jwtSettingsNN !
.NN! "
IssuerNN" (
,NN( )
ValidAudienceOO 
=OO 
jwtSettingsOO #
.OO# $
AudienceOO$ ,
,OO, -
IssuerSigningKeyPP 
=PP 
newPP  
SymmetricSecurityKeyPP 3
(PP3 4
EncodingPP4 <
.PP< =
UTF8PP= A
.PPA B
GetBytesPPB J
(PPJ K
jwtSettingsPPK V
.PPV W
KeyPPW Z
)PPZ [
)PP[ \
}QQ 
;QQ 
}RR 
)RR 
;RR 
builderTT 
.TT 
ServicesTT 
.TT 
AddAuthorizationTT !
(TT! "
)TT" #
;TT# $
varVV 
appVV 
=VV 	
builderVV
 
.VV 
BuildVV 
(VV 
)VV 
;VV 
appXX 
.XX 

UseRoutingXX 
(XX 
)XX 
;XX 
appZZ 
.ZZ 
UseAuthenticationZZ 
(ZZ 
)ZZ 
;ZZ 
app[[ 
.[[ 
UseAuthorization[[ 
([[ 
)[[ 
;[[ 
app]] 
.]] 

UseSwagger]] 
(]] 
)]] 
;]] 
app^^ 
.^^ 
UseSwaggerUI^^ 
(^^ 
)^^ 
;^^ 
app`` 
.`` 
UseEndpoints`` 
(`` 
	endpoints`` 
=>`` 
{aa 
	endpointsbb 
.bb 
MapControllersbb 
(bb 
)bb 
;bb 
}cc 
)cc 
;cc 
usingff 
(ff 
varff 

scopeff 
=ff 
appff 
.ff 
Servicesff 
.ff  
CreateScopeff  +
(ff+ ,
)ff, -
)ff- .
{gg 
varhh 
	dbContexthh 
=hh 
scopehh 
.hh 
ServiceProviderhh )
.hh) *
GetRequiredServicehh* <
<hh< =
OrderDbContexthh= K
>hhK L
(hhL M
)hhM N
;hhN O
	dbContextii 
.ii 
Databaseii 
.ii 
Migrateii 
(ii 
)ii  
;ii  !
}jj 
appll 
.ll 
Runll 
(ll 
)ll 	
;ll	 
ÿ
QC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Models\OrderItemDto.cs
	namespace 	
OrderService
 
. 
Models 
{ 
public 
class 
OrderItemDto 
{ 
public 

Guid 

FoodItemId 
{ 
get  
;  !
set" %
;% &
}' (
public 

string 
Name 
{ 
get 
; 
set !
;! "
}# $
public 

decimal 
Price 
{ 
get 
; 
set  #
;# $
}% &
public		 

int		 
Quantity		 
{		 
get		 
;		 
set		 "
;		" #
}		$ %
}

 
} ‡
NC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Models\OrderItem.cs
	namespace 	
OrderService
 
. 
Models 
{ 
public 

class 
	OrderItem 
{ 
[		 	
Key			 
]		 
public

 
Guid

 
OrderItemId

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
[ 	
Required	 
] 
public 
Guid 
OrderId 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
public 
Guid 

FoodItemId 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
Required	 
] 
[ 	
Column	 
( 
TypeName 
= 
$str *
)* +
]+ ,
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Required	 
] 
public 
int 
Quantity 
{ 
get !
;! "
set# &
;& '
}( )
public 
Order 
Order 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ï
JC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Models\Order.cs
	namespace 	
OrderService
 
. 
Models 
{ 
public 

class 
Order 
{ 
[ 	
Key	 
] 
public		 
Guid		 
OrderId		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
[ 	
Required	 
] 
public 
Guid 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
Required	 
] 
public 
Guid 
RestaurantId  
{! "
get# &
;& '
set( +
;+ ,
}- .
[ 	
Required	 
] 
public 
decimal 
TotalAmount "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DateTime 
	OrderDate !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
DateTime2 :
.: ;
UtcNow; A
;A B
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
Status 
{ 
get "
;" #
set$ '
;' (
}) *
=+ ,
$str- 6
;6 7
public 
List 
< 
	OrderItem 
> 
Items $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ƒ	
PC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Models\JwtSettings.cs
	namespace 	
OrderService
 
. 
Models 
{ 
public 

class 
JwtSettings 
{ 
public 
string 
Key 
{ 
get 
;  
set! $
;$ %
}& '
=( )
string* 0
.0 1
Empty1 6
;6 7
public 
string 
Issuer 
{ 
get "
;" #
set$ '
;' (
}) *
=+ ,
string- 3
.3 4
Empty4 9
;9 :
public 
string 
Audience 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
int 
ExpiryMinutes  
{! "
get# &
;& '
set( +
;+ ,
}- .
}		 
}

 ¡
SC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Models\CreateOrderDto.cs
	namespace 	
OrderService
 
. 
Models 
{ 
public 
class 
CreateOrderDto 
{ 
public 

Guid 
UserId 
{ 
get 
; 
set !
;! "
}# $
public 

Guid 
RestaurantId 
{ 
get "
;" #
set$ '
;' (
}) *
public		 

List		 
<		 
OrderItemDto		 
>		 
Items		 #
{		$ %
get		& )
;		) *
set		+ .
;		. /
}		0 1
}

 
} »7
eC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Migrations\20250512104152_InitialCreate.cs
	namespace 	
OrderService
 
. 

Migrations !
{ 
public		 

partial		 
class		 
InitialCreate		 &
:		' (
	Migration		) 2
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
OrderId 
= 
table #
.# $
Column$ *
<* +
Guid+ /
>/ 0
(0 1
type1 5
:5 6
$str7 I
,I J
nullableK S
:S T
falseU Z
)Z [
,[ \
UserId 
= 
table "
." #
Column# )
<) *
Guid* .
>. /
(/ 0
type0 4
:4 5
$str6 H
,H I
nullableJ R
:R S
falseT Y
)Y Z
,Z [
RestaurantId  
=! "
table# (
.( )
Column) /
</ 0
Guid0 4
>4 5
(5 6
type6 :
:: ;
$str< N
,N O
nullableP X
:X Y
falseZ _
)_ `
,` a
TotalAmount 
=  !
table" '
.' (
Column( .
<. /
decimal/ 6
>6 7
(7 8
type8 <
:< =
$str> M
,M N
	precisionO X
:X Y
$numZ \
,\ ]
scale^ c
:c d
$nume f
,f g
nullableh p
:p q
falser w
)w x
,x y
	OrderDate 
= 
table  %
.% &
Column& ,
<, -
DateTime- 5
>5 6
(6 7
type7 ;
:; <
$str= H
,H I
nullableJ R
:R S
falseT Y
)Y Z
,Z [
Status 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 F
,F G
	maxLengthH Q
:Q R
$numS U
,U V
nullableW _
:_ `
falsea f
)f g
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 0
,0 1
x2 3
=>4 6
x7 8
.8 9
OrderId9 @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str !
,! "
columns   
:   
table   
=>   !
new  " %
{!! 
OrderItemId"" 
=""  !
table""" '
.""' (
Column""( .
<"". /
Guid""/ 3
>""3 4
(""4 5
type""5 9
:""9 :
$str""; M
,""M N
nullable""O W
:""W X
false""Y ^
)""^ _
,""_ `
OrderId## 
=## 
table## #
.### $
Column##$ *
<##* +
Guid##+ /
>##/ 0
(##0 1
type##1 5
:##5 6
$str##7 I
,##I J
nullable##K S
:##S T
false##U Z
)##Z [
,##[ \

FoodItemId$$ 
=$$  
table$$! &
.$$& '
Column$$' -
<$$- .
Guid$$. 2
>$$2 3
($$3 4
type$$4 8
:$$8 9
$str$$: L
,$$L M
nullable$$N V
:$$V W
false$$X ]
)$$] ^
,$$^ _
Name%% 
=%% 
table%%  
.%%  !
Column%%! '
<%%' (
string%%( .
>%%. /
(%%/ 0
type%%0 4
:%%4 5
$str%%6 E
,%%E F
nullable%%G O
:%%O P
false%%Q V
)%%V W
,%%W X
Price&& 
=&& 
table&& !
.&&! "
Column&&" (
<&&( )
decimal&&) 0
>&&0 1
(&&1 2
type&&2 6
:&&6 7
$str&&8 G
,&&G H
nullable&&I Q
:&&Q R
false&&S X
)&&X Y
,&&Y Z
Quantity'' 
='' 
table'' $
.''$ %
Column''% +
<''+ ,
int'', /
>''/ 0
(''0 1
type''1 5
:''5 6
$str''7 <
,''< =
nullable''> F
:''F G
false''H M
)''M N
}(( 
,(( 
constraints)) 
:)) 
table)) "
=>))# %
{** 
table++ 
.++ 

PrimaryKey++ $
(++$ %
$str++% 3
,++3 4
x++5 6
=>++7 9
x++: ;
.++; <
OrderItemId++< G
)++G H
;++H I
table,, 
.,, 

ForeignKey,, $
(,,$ %
name-- 
:-- 
$str-- ;
,--; <
column.. 
:.. 
x..  !
=>.." $
x..% &
...& '
OrderId..' .
,... /
principalTable// &
://& '
$str//( 0
,//0 1
principalColumn00 '
:00' (
$str00) 2
,002 3
onDelete11  
:11  !
ReferentialAction11" 3
.113 4
Cascade114 ;
)11; <
;11< =
}22 
)22 
;22 
migrationBuilder44 
.44 
CreateIndex44 (
(44( )
name55 
:55 
$str55 ,
,55, -
table66 
:66 
$str66 "
,66" #
column77 
:77 
$str77 !
)77! "
;77" #
}88 	
	protected;; 
override;; 
void;; 
Down;;  $
(;;$ %
MigrationBuilder;;% 5
migrationBuilder;;6 F
);;F G
{<< 	
migrationBuilder== 
.== 
	DropTable== &
(==& '
name>> 
:>> 
$str>> !
)>>! "
;>>" #
migrationBuilder@@ 
.@@ 
	DropTable@@ &
(@@& '
nameAA 
:AA 
$strAA 
)AA 
;AA  
}BB 	
}CC 
}DD ¯
XC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Data\OrderDbContextFactory.cs
	namespace 	
OrderService
 
. 
Data 
{ 
public 

class !
OrderDbContextFactory &
:' ('
IDesignTimeDbContextFactory) D
<D E
OrderDbContextE S
>S T
{		 
public

 
OrderDbContext

 
CreateDbContext

 -
(

- .
string

. 4
[

4 5
]

5 6
args

7 ;
)

; <
{ 	
var 
config 
= 
new  
ConfigurationBuilder 1
(1 2
)2 3
. 
SetBasePath 
( 
	Directory &
.& '
GetCurrentDirectory' :
(: ;
); <
)< =
. 
AddJsonFile 
( 
$str /
)/ 0
. 
Build 
( 
) 
; 
var 
optionsBuilder 
=  
new! $#
DbContextOptionsBuilder% <
<< =
OrderDbContext= K
>K L
(L M
)M N
;N O
optionsBuilder 
. 
UseSqlServer '
(' (
config( .
.. /
GetConnectionString/ B
(B C
$strC V
)V W
)W X
;X Y
return 
new 
OrderDbContext %
(% &
optionsBuilder& 4
.4 5
Options5 <
)< =
;= >
} 	
} 
} è
QC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Data\OrderDbContext.cs
	namespace 	
OrderService
 
. 
Data 
{ 
public 

class 
OrderDbContext 
:  !
	DbContext" +
{ 
public 
OrderDbContext 
( 
DbContextOptions .
<. /
OrderDbContext/ =
>= >
options? F
)F G
:		 
base		 
(		 
options		 
)		 
{		 
}		 
public 
DbSet 
< 
Order 
> 
Orders "
{# $
get% (
;( )
set* -
;- .
}/ 0
	protected 
override 
void 
OnModelCreating -
(- .
ModelBuilder. :
modelBuilder; G
)G H
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
modelBuilder 
. 
Entity 
<  
Order  %
>% &
(& '
)' (
.( )
HasKey) /
(/ 0
o0 1
=>2 4
o5 6
.6 7
OrderId7 >
)> ?
;? @
modelBuilder 
. 
Entity 
<  
Order  %
>% &
(& '
)' (
. 
Property 
( 
o 
=> 
o 
. 
TotalAmount (
)( )
. 
HasPrecision 
( 
$num 
, 
$num 
)  
;  !
} 	
} 
} Ð;
YC:\Users\msi bravo\Desktop\FoodOrderingSystem\OrderService\Controllers\OrderController.cs
	namespace		 	
OrderService		
 
.		 
Controllers		 "
{

 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
OrderController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IOrderService &
_orderService' 4
;4 5
private 
readonly 
OrderDbContext '
_context( 0
;0 1
public 
OrderController 
( 
IOrderService ,
orderService- 9
,9 :
OrderDbContext; I
contextJ Q
)Q R
{ 	
_orderService 
= 
orderService (
;( )
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetAll) /
(/ 0
)0 1
{ 	
var 
orders 
= 
await 
_orderService ,
., -
GetAllOrdersAsync- >
(> ?
)? @
;@ A
return 
Ok 
( 
orders 
) 
; 
} 	
[   	
HttpPost  	 
]   
public!! 

async!! 
Task!! 
<!! 
IActionResult!! #
>!!# $
CreateOrder!!% 0
(!!0 1
CreateOrderDto!!1 ?
dto!!@ C
)!!C D
{"" 
var## 
order## 
=## 
new## 
Order## 
{$$ 	
OrderId%% 
=%% 
Guid%% 
.%% 
NewGuid%% "
(%%" #
)%%# $
,%%$ %
UserId&& 
=&& 
dto&& 
.&& 
UserId&& 
,&&  
RestaurantId'' 
='' 
dto'' 
.'' 
RestaurantId'' +
,''+ ,
	OrderDate(( 
=(( 
DateTime((  
.((  !
UtcNow((! '
,((' (
Status)) 
=)) 
$str)) 
,)) 
Items** 
=** 
dto** 
.** 
Items** 
.** 
Select** $
(**$ %
i**% &
=>**' )
new*** -
	OrderItem**. 7
{++ 
OrderItemId,, 
=,, 
Guid,, "
.,," #
NewGuid,,# *
(,,* +
),,+ ,
,,,, -

FoodItemId-- 
=-- 
i-- 
.-- 

FoodItemId-- )
,--) *
Name.. 
=.. 
i.. 
... 
Name.. 
,.. 
Price// 
=// 
i// 
.// 
Price// 
,//  
Quantity00 
=00 
i00 
.00 
Quantity00 %
}11 
)11 
.11 
ToList11 
(11 
)11 
}22 	
;22	 

order44 
.44 
TotalAmount44 
=44 
order44 !
.44! "
Items44" '
.44' (
Sum44( +
(44+ ,
i44, -
=>44. 0
i441 2
.442 3
Price443 8
*449 :
i44; <
.44< =
Quantity44= E
)44E F
;44F G
_context66 
.66 
Orders66 
.66 
Add66 
(66 
order66 !
)66! "
;66" #
await77 
_context77 
.77 
SaveChangesAsync77 '
(77' (
)77( )
;77) *
return99 
CreatedAtAction99 
(99 
nameof99 %
(99% &
GetById99& -
)99- .
,99. /
new990 3
{994 5
id996 8
=999 :
order99; @
.99@ A
OrderId99A H
}99I J
,99J K
order99L Q
)99Q R
;99R S
}:: 
[?? 	
HttpGet??	 
(?? 
$str?? 
)?? 
]?? 
public@@ 
async@@ 
Task@@ 
<@@ 
IActionResult@@ '
>@@' (
GetById@@) 0
(@@0 1
Guid@@1 5
id@@6 8
)@@8 9
{AA 	
varBB 
orderBB 
=BB 
awaitBB 
_orderServiceBB +
.BB+ ,
GetOrderByIdAsyncBB, =
(BB= >
idBB> @
)BB@ A
;BBA B
ifCC 
(CC 
orderCC 
==CC 
nullCC 
)CC 
returnCC %
NotFoundCC& .
(CC. /
)CC/ 0
;CC0 1
returnDD 
OkDD 
(DD 
orderDD 
)DD 
;DD 
}EE 	
[GG 	
HttpGetGG	 
(GG 
$strGG  
)GG  !
]GG! "
publicHH 
asyncHH 
TaskHH 
<HH 
IActionResultHH '
>HH' (
GetByUserIdHH) 4
(HH4 5
GuidHH5 9
userIdHH: @
)HH@ A
{II 	
varJJ 
ordersJJ 
=JJ 
awaitJJ 
_orderServiceJJ ,
.JJ, -"
GetOrdersByUserIdAsyncJJ- C
(JJC D
userIdJJD J
)JJJ K
;JJK L
returnKK 
OkKK 
(KK 
ordersKK 
)KK 
;KK 
}LL 	
[XX 	
HttpPutXX	 
(XX 
$strXX 
)XX 
]XX  
publicYY 
asyncYY 
TaskYY 
<YY 
IActionResultYY '
>YY' (
UpdateStatusYY) 5
(YY5 6
GuidYY6 :
idYY; =
,YY= >
[YY? @
	FromQueryYY@ I
]YYI J
stringYYK Q
	newStatusYYR [
)YY[ \
{ZZ 	
var[[ 
updated[[ 
=[[ 
await[[ 
_orderService[[  -
.[[- ."
UpdateOrderStatusAsync[[. D
([[D E
id[[E G
,[[G H
	newStatus[[I R
)[[R S
;[[S T
if\\ 
(\\ 
!\\ 
updated\\ 
)\\ 
return\\  
NotFound\\! )
(\\) *
)\\* +
;\\+ ,
return]] 
	NoContent]] 
(]] 
)]] 
;]] 
}^^ 	
[`` 	

HttpDelete``	 
(`` 
$str`` 
)`` 
]`` 
publicaa 
asyncaa 
Taskaa 
<aa 
IActionResultaa '
>aa' (
Deleteaa) /
(aa/ 0
Guidaa0 4
idaa5 7
)aa7 8
{bb 	
varcc 
deletedcc 
=cc 
awaitcc 
_orderServicecc  -
.cc- .
DeleteOrderAsynccc. >
(cc> ?
idcc? A
)ccA B
;ccB C
ifdd 
(dd 
!dd 
deleteddd 
)dd 
returndd  
NotFounddd! )
(dd) *
)dd* +
;dd+ ,
returnee 
	NoContentee 
(ee 
)ee 
;ee 
}ff 	
}gg 
}hh 